on:
  pull_request:
  # push:
    # branches:
      # - main

permissions:
  contents: write
  pull-requests: write

name: Release and deploy
jobs:
  list-packages:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Read release-please-config.json
        id: read-release-please-config
        run: |
          releasePleaseConfig=`jq '.' release-please-config.json`
          releasePleaseConfigPackages=`jq '.packages | keys[]' release-please-config.json | jq -n '[inputs]'`
          echo 'releasePleaseConfig="$releasePleaseConfig"' >> "$GITHUB_OUTPUT" 
          echo 'releasePleaseConfigPackages="$releasePleaseConfigPackages"' >> "$GITHUB_OUTPUT" 
          # jq '.packages | keys[]' release-please-config.json
      - run: |
          echo ${{ steps.read-release-please-config.outputs.releasePleaseConfig }} 
          echo ${{ steps.read-release-please-config.outputs.releasePleaseConfigPackages }} 

  # release-please:
    # runs-on: ubuntu-latest
    # steps:
      # - uses: google-github-actions/release-please-action@v3
        # id: release
        # with:
          # command: manifest
          # token: ${{secrets.GITHUB_TOKEN}}
          # default-branch: main
